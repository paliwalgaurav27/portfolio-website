"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[68357],{272965:(e,t,n)=>{n.r(t),n.d(t,{default:()=>h});var i=n(667294),o=n(545007),s=n(883119),a=n(161881),r=n(903591),m=n(53264),_=n(214877),d=n(454514),l=n(140017),c=n(96452),u=n(13848),p=n(149722),g=n(413110),f=n(923368),A=n(930822),C=n(785893);function h({aggregatedPinDataId:e,closeupAttributionId:t,commentCount:n,disablePhotoCommentSelection:h,inCommentFeedRedesignExp:y,isDesktopSheetModal:x=!1,isEligibleForPinReactions:S,isPDP:D,orbacSubjectId:E,pinId:L,privatePin:N,reactionByMe:O,reactionCounts:P,setIsLoadingNewlyCreatedComment:j,showCommentComposer:v,showReactBackground:w,storyPinDataId:I,viewParameter:b}){let B;let M=(0,l.ZP)(),Z=(0,p.Z)(),k=(0,o.I0)(),{logContextEvent:R}=(0,_.v)(),T=(0,a.Z)(),{showOneToast:U}=(0,u.F9)(),{stackedCloseupEnabled:z}=(0,f.x4)(),[F,H]=(0,i.useState)(!1),[K,W]=(0,i.useState)(r.A9.NONE);async function J(n){let{contentMarkdown:i,force:o,imageSignatures:s,tags:a}=n;if(null===e)return!1;j(!0);try{if(e){if(s.length){let t={aggregatedPinDataId:e,details:i,image_signatures:s,pin_id:L??"",username:Z.username||"",fromUnifiedComment:!0};await k((0,A.DD)(t))}else await T({force:o,fromUnifiedComment:!0,objectType:g.o.pin,objectId:e,pinId:L,tags:a,text:i,orbacSubjectId:E});R({event_type:7,object_id_str:L,aux_data:{num_user_mention_tags:(a?JSON.parse(a):[]).length,...I?{creator_id:t,story_pin_data_id:I}:{}}})}}catch(e){return[c.ky,c.LJ].includes(e.api_error_code)?W(e.api_error_code===c.ky?r.A9.WARNING:r.A9.BLOCK):U(({hideToast:t})=>(0,C.jsx)(d.ZP,{onHide:t,text:e.message_detail||e.message||M._('There was an issue posting your comment.', 'comment.post.errorMessage', 'error message for posting comment in toast'),type:"error"})),j(!1),!1}return H(!1),j(!1),!0}return B=D?z?2:8:z?1:0,(0,C.jsx)(s.xu,{marginEnd:B,marginStart:z?2:D?y?8:6:0,width:x?"100%":void 0,children:(0,C.jsx)(m.Z,{commentCount:n,commentWarningModalState:K,disablePhotoCommentSelection:h,dismissCommentWarningModal:()=>W(r.A9.NONE),iconSize:D?20:void 0,inCommentFeedRedesignExp:y,isCloseup:z,isDesktopSheetModal:x,isEligibleForPinReactions:S,isLeftAligned:D,objectType:g.o.pin,onAddItem:J,onCancelItem:()=>H(!1),onEnter:()=>H(!0),pinId:L,privatePin:N,reactionByMe:O,reactionCounts:P,showCommentComposer:v,showReactBackground:!D&&w,statusType:F?"textInflightCreation":"textStaticDisplay",viewParameter:b})})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/app-common-react-components-closeup-CloseupBody-CloseupInlineCommentComposer-c4e73b2906969d40.mjs.map